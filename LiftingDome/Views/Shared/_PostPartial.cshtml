@using LiftingDome.Infrastructure.Extensions;
@using LiftingDome.Services.Data.Interfaces;
@model AllForumPostViewModel
@inject ICoachService CoachService
@inject IForumChatService ForumChatService

@{
	bool IsOwner = await ForumChatService.IsUserOwnerOfPostWithIdAsync(this.User.GetId()!, Model.Id);
}

<div class="col-md-4">
	<div class="card mb-3">
		<div class="card-body text-center">
		@switch (Model.CategoryName.ToLower())
		{
			case "crossfit":
					<p class="text-center text-white" style="background-color:#bfbfbe; margin:0; padding:5px">@Model.CategoryName</p>
				break;
			case "bodybuilding":
					<p class="text-center text-white" style="background-color:#9f9f9e; margin:0; padding:5px">@Model.CategoryName</p>
				break;
			case "powerlifting":
					<p class="text-center text-white" style="background-color:#6f706f; margin:0; padding:5px">@Model.CategoryName</p>
				break;
			case "general":
					<p class="text-center text-white" style="background-color:black; margin:0; padding:5px">@Model.CategoryName</p>
				break;
			default:
				break;
		}
			<h5>@Model.Text</h5>
			<b>
				@Model.CreatorName
			</b>
			@if (await CoachService.CoachExistsByUserIdAsync(Model.CreatorId))
			{
				<label style="color:red">Coach</label>
			}
			else
			{
				<label style="color:red">Trainee</label>
			}
			@if (IsOwner)
			{
				<a asp-controller="ForumChat" asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-dark">Edit</a>
			}
		 </div>
	</div>
</div>